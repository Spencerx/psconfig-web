<ng-include src="'t/sidebar.html'"></ng-include>
<div class="sca-sidebar-page">
    <div class="subbar">
        <div style="padding-left: 20px; margin-bottom: 10px;">
            <h2>Mesh Configs</h2>
            <p class="help-block">Showing registred mesh configs</p>
            <!--
            <br>
            <div class="btn-group pull-right" style="left: -20px;top: -5px;">
                <button class="btn btn-xs btn-default dropdown-toggle" 
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Type <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                <li><a href>All</a></li>
                <li role="separator" class="divider"></li>
                <li><a href>Latency</a></li>
                <li><a href>Bandwidth</a></li>
                <li><a href>Traceroute</a></li>
                <li><a href>Pinger</a></li>
                </ul>
            </div>
            -->
            <span class="text-muted">{{configs.length}} configs</span>
        </div>
        <hr style="margin: 0px;">

        <div class="subbar-list" style="bottom: 160px;">
            <p class="alert alert-info" ng-if="configs.length == 0">Please register a mesh config.</p>
            <div class="subbar-list-item" 
                ng-repeat="config in configs" 
                ng-class="{active: selected == config}"
                ng-click="select(config)">
                <time class="help-block pull-right">{{config.create_date|date}}</time>
                <div class="list-header">
                    <small>
                        <span class="label label-default">{{config.url}}</span> {{config.desc}}
                        <i ng-if="!config._canedit" class="fa fa-lock text-muted"></i>
                    </small>
                </div>
            </div>
            <div class="list-addbutton" ng-click="add()">
                <i class="fa fa-plus-circle" aria-hidden="true"></i> 
            </div>
        </div>

        <div class="autoconfig" style="position: fixed; bottom: 0px; width: 350px; height: 160px; background-color: #eee; padding: 5px 10px; box-shadow: inset 0px 4px 10px #ccc">
            <h4>Auto Mesh Config</h4>
            <p class="help-block">Enter hostname of perfSONAR toolkit instance to generate a mesh config URL containing tests for that instance as test endpoints.</p>
            <ui-select 
                ng-model="autoconf_select" on-select="autoconf($item)">
                <ui-select-match placeholder="Enter hostname">
                    <div style="padding-top: 2px; font-size: 12px">
                        <b>{{$select.selected.sitename}}</b> ({{$select.selected.hostname}})
                    </div>
                </ui-select-match>
                <ui-select-choices 
                    position="auto"
                    repeat="host.uuid as host in hosts | filter: $select.search">
                    <b>{{host.sitename}}</b> (<span ng-if="host.hostname">{{host.hostname}}</span><span ng-if="!host.hostname && host.ip">{{host.ip}}</span>)
                </ui-select-choices>
            </ui-select>
        </div>

    </div><!--subbar-->

    <div class="subbar-content">
        <p class="alert alert-info" ng-if="!selected">Please select config</p>

        <form name="form" class="form-horizontal" ng-submit="submit()" ng-show="selected">
            <div class="fixed-top">
                <h2>h2 he3re </h2>
                <br clear="right">
                <div class="form-group">
                    <div class="margin30">
                        <label for="desc" class="col-sm-2 control-label"><strong>Name *</strong></label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="desc" ng-model="selected.desc" 
                                ng-disabled="!selected._canedit"
                                placeholder="Name for this config" required>
                        </div>
                    </div>
                </div>
                <hr style="margin-bottom: 0px;">
            </div><!--fixed-top-->

            <div style="padding-top: 150px" class="margin30">
                <h1>form</h1>

                <br>
                <br>
                <h3>Debug</h3>
                <pre>{{selected|json}}</pre>
            </div>
        </form>
        <!--
        <ul class="list-group">
        <li class="list-group-item" style="background-color: #fafafa">
            <br>
            <br>
        </li>
        <li class="list-group-item" ng-repeat="config in configs | orderBy:'id' ">
            <div class="row">
                <div class="col-lg-8">
                    <h4>
                        <small>{{config.id}}</small> 
                        {{config.desc}}
                        <small><a href="{{appconf.pub_url}}/config/{{config.url}}" target="_blank">/{{config.url}}</a></small>
                    </h4>
                    <mc-tests tests="config.Tests" servicetypes="serverconf.service_types"></mc-tests>
                </div>
                <div class="col-md-4">
                    <h5>Admins<small> (who can edit)</small></h5>
                    <mc-admins admins="config.admins"></mc-admins>
                </div>
            </div>
            <div class="pull-right edit_button" ng-if="config.canedit">
                <button type="button" ng-click="edit(config)" class="btn btn-xs pull-right"><i class="fa fa-pencil-square-o"></i></button>
            </div>
            <div class="pull-right edit_button" ng-if="!config.canedit">
                <button type="button" ng-click="edit(config)" class="btn btn-xs pull-right"><i class="fa fa-eye"></i></button>
            </div>
        </li>
        </ul>
        <button type="button" ng-click="addconfig()" ng-if="cancreate" class="btn btn-sm">Add New</button>
        -->
    </div><!--subbar-content-->
</div><!--sca-sidebar-page-->

